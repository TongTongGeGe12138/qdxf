import{e as pa,k as c,ak as $,x as _,o as fa,$ as ma,t as h,A as t,h as o,z as Y,u as ye,K as ga,r as g,H as A,I as Q,F as T,w as s,E as u,f as R,J as U,aa as ba,L as wa,a7 as ha,C as _a,B as ya,g as p,n as Ca,al as ka}from"./vendor-D1U3vd9f.js";import{u as Va,i as y,U as Pa,A as Ua,B as ee,C as Ia,D as Da,E as xa,F as Na,G as Ba,H as Fa}from"./index-Bz-KOdQ0.js";import{e as Wa,f as La}from"./dict-BkvdzF-A.js";import{g as Ce,a as ke}from"./location-CHk7_fmB.js";import{_ as Oa}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Aa={class:"account-container"},Ra={class:"account-card"},Sa={class:"profile-header"},qa={class:"user-details"},Ga={class:"username"},Ja={class:"topnamev"},Za={class:"details-list"},Ea={class:"detail-label"},Ha={class:"detail-value"},Xa={key:0},Ma={key:0,class:"save-button-container"},Qa={class:"dialog-content"},Ta={class:"address-group"},za={class:"phone-row"},ja={class:"form-item-content"},Ka={class:"form-item-content"},$a={class:"dialog-content"},Ya=["src"],el={key:1,class:"uploader-icon-container"},al={key:1,class:"cropper-container"},ll=["src"],ol={class:"dialog-footer"},sl={class:"dialog-content"},tl={class:"dialog-content"},nl={class:"qrcode-container","element-loading-text":"二维码加载中..."},rl={key:0,class:"qrcode-expired-overlay"},il={class:"dialog-content"},dl={class:"dialog-footer"},ul=pa({__name:"index",setup(cl){ya(a=>({"91ea61ec":je.value,"3593dbf2":ze.value,"0795f392":aa.value,"73a6727b":Ke.value,d7dbc746:Ye.value,"54b2facd":ea.value,"4420426b":$e.value,"9b367af8":la.value,ebd0e006:oa.value,"433c591c":sa.value,"2d17c540":ta.value}));const Ve=_a(),Pe=Va(),ae=c(!1),le=c(!1),d=$({userName:"",nickName:"",registedDate:"",gender:null,profession:"",qualifications:null,avatarUrl:"",phone:"",wechat_nickname:"",address:"",locationId:null,phoneInvisible:!1}),ie={...d},oe=c([]),se=c([]),Ue=async()=>{const a=await Ce();if(a.code===200){oe.value=a.data;let e=[];for(const n of a.data){const i=await ke(n.id);i.code===200&&(e=e.concat(i.data.map(v=>({...v,provinceId:n.id,provinceName:n.name}))))}se.value=e}};function Ie(a){if(!a)return"-";const e=se.value.find(i=>String(i.id)===String(a));if(e)return`中国,${e.provinceName},${e.name}`;const n=oe.value.find(i=>String(i.id)===String(a));return n?`中国,${n.name}`:"-"}const De=_(()=>[{label:"姓名",value:d.nickName||"-",key:"nickName",editable:!0},{label:"注册日期",value:d.registedDate?new Date(d.registedDate).toLocaleDateString():"-",key:"registedDate",editable:!1},{label:"性别",value:d.gender===1?"男":d.gender===2?"女":"未设置",key:"gender",editable:!0},{label:"专业身份",value:d.profession||"-",key:"profession",editable:!0},{label:"职业资格",value:d.qualifications||"-",key:"qualifications",editable:!0},{label:"所在地区",value:Ie(d.locationId),key:"address",editable:!1}]),I=async()=>{try{const a=await Pa();a.data&&(Object.assign(d,a.data),Object.assign(ie,a.data))}catch(a){console.error("Fetch user info error:",a)}},xe=async()=>{le.value=!0;try{const a={nickName:d.nickName,gender:d.gender,profession:d.profession,qualifications:d.qualifications};await ee(a),Object.assign(ie,d),u.success("保存成功"),ae.value=!1}catch(a){console.error("Save profile error:",a)}finally{le.value=!1}},V=c(!1),B=c("personal"),r=c({}),Ne=_(()=>{if(r.value.phoneInvisible&&d.phone){const a=String(d.phone);if(a.length===11)return a.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}return d.phone}),de=c([]),ue=c([]),ce=c("中国"),C=c(""),k=c(""),S=c([]),P=c([]),Be=async()=>{try{const a=await Wa();a.code===200&&a.data&&(de.value=a.data.map(e=>({label:e.name,value:e.name})))}catch(a){console.error("Failed to fetch profession options:",a)}},Fe=async()=>{try{const a=await La();a.code===200&&a.data&&(ue.value=a.data.map(e=>({label:e.name,value:e.name})))}catch(a){console.error("Failed to fetch qualification options:",a)}},ve=async()=>{try{const a=await Ce();a.code===200&&(S.value=a.data.map(e=>({value:e.id,label:e.name})))}catch(a){console.error("获取省份列表失败:",a)}},z=async a=>{try{const e=await ke(a);e.code===200?P.value=e.data.map(n=>({value:n.id,label:n.name})):P.value=[]}catch(e){console.error("获取城市列表失败:",e),P.value=[]}},We=async a=>{k.value="",a?await z(a):P.value=[]},Le=async()=>{if(r.value={...d},B.value="personal",V.value=!0,d.locationId){const e=se.value.find(i=>String(i.id)===String(d.locationId));if(e){C.value=e.provinceId,await z(e.provinceId),k.value=e.id;return}const n=oe.value.find(i=>String(i.id)===String(d.locationId));if(n){C.value=n.id,await z(n.id),k.value="";return}}C.value="",k.value="",P.value=[];const a=r.value.address;if(a){const e=a.split(",");if(e.length>1&&e[1]){const n=e[1];S.value.length===0&&await ve();const i=S.value.find(v=>v.label===n);if(i&&(C.value=i.value,await z(i.value),e.length>2&&e[2])){const v=e[2],O=P.value.find(f=>f.label===v);O&&(k.value=O.value)}}}},pe=()=>{V.value=!1},Oe=async()=>{var a,e;if(console.log("handleConfirmUpdate 被调用"),console.log("activeTab.value:",B.value),B.value==="personal")try{console.log("开始处理个人资料更新");const n=(a=S.value.find(E=>E.value===C.value))==null?void 0:a.label,i=(e=P.value.find(E=>E.value===k.value))==null?void 0:e.label,v=["中国",n,i].filter(Boolean),O=v.length>1?v.join(","):"中国",f=k.value||C.value||r.value.locationId,Z={userName:r.value.userName,nickName:r.value.nickName,gender:r.value.gender,profession:r.value.profession,qualifications:r.value.qualifications,registedDate:r.value.registedDate,address:O,locationId:f,phoneInvisible:r.value.phoneInvisible,phone:r.value.phone,oldPhone:r.value.phone,password:"",status:!1};console.log("发送的参数:",Z),console.log("UserCenterUpdateUserInfo 函数:",ee),await ee(Z),console.log("API 调用成功"),await I(),V.value=!1,u.success("更新成功")}catch(n){console.error("更新失败:",n),u.error("更新失败，请重试")}else if(B.value==="security")try{console.log("开始处理账号安全更新");const n={userName:r.value.userName,nickName:r.value.nickName,gender:r.value.gender,profession:r.value.profession,qualifications:r.value.qualifications,registedDate:r.value.registedDate,address:r.value.address,locationId:r.value.locationId,phoneInvisible:r.value.phoneInvisible,phone:r.value.phone,oldPhone:r.value.phone,password:"",status:!1};console.log("发送的参数:",n),await ee(n),console.log("API 调用成功"),await I(),V.value=!1,u.success("更新成功")}catch(n){console.error("更新失败:",n),u.error("更新失败，请重试")}else console.log("不是个人资料或账号安全标签页，直接关闭对话框"),V.value=!1},F=c(!1),W=c(""),fe=c(null),j=c(!1),m=c(null),te=c(null),me=()=>{if(W.value=d.avatarUrl,fe.value=null,j.value=!1,m.value&&typeof m.value.destroy=="function")try{m.value.destroy()}catch(a){console.warn("销毁裁剪器时出错:",a)}m.value=null,F.value=!0},Ae=a=>{const e=a.raw;fe.value=e;const n=new FileReader;n.onload=()=>{W.value=URL.createObjectURL(e),j.value=!0,Ca(()=>{if(te.value){if(m.value&&typeof m.value.destroy=="function")try{m.value.destroy()}catch(v){console.warn("销毁旧裁剪器时出错:",v)}const i=new Image;i.onload=()=>{try{m.value=new ka(te.value,{aspectRatio:1,viewMode:1,autoCropArea:1,zoomable:!0,scalable:!0,cropBoxResizable:!1,background:!1})}catch(v){console.error("创建裁剪器实例失败:",v),u.error("初始化图片裁剪器失败，请重试")}},i.onerror=()=>{console.error("图片加载失败"),u.error("图片加载失败，请重试")},i.src=W.value}})},n.readAsDataURL(e)},Re=a=>a.type==="image/jpeg"||a.type==="image/png"?a.size/1024/1024<5?!0:(u.error("头像大小不能超过 5MB!"),!1):(u.error("头像必须是 JPG/PNG 格式!"),!1),ge=a=>{if(!a)return"";if(a.startsWith("http")||a.startsWith("blob:"))return a;const e="https://dev-pub-1317099474.cos.ap-shanghai.myqcloud.com/",n=a.startsWith("/")?a.substring(1):a;return`${e}/${n}`},Se=async()=>{if(!m.value||typeof m.value.getCroppedCanvas!="function"){u.warning("请先选择并裁剪头像");return}try{console.log("Cropper instance:",m.value),console.log("Cropper methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(m.value)));const a=m.value.getCroppedCanvas({width:200,height:200});if(!a){u.error("裁剪失败，请重试");return}a.toBlob(async e=>{if(e){const n=new FormData;n.append("file",e,"avatar.png");try{await Ia(n),u.success("头像上传成功"),F.value=!1,await I()}catch(i){console.error("Avatar upload error:",i),u.error("头像上传失败")}}else u.error("图片转换失败")},"image/png")}catch(a){console.error("Crop error:",a),u.error("头像裁剪失败，请重试")}},q=c(!1),w=$({phone:"",code:""}),D=c(0);let x=null;const qe=()=>{w.phone="",w.code="",D.value=0,x&&clearInterval(x),q.value=!0},Ge=async()=>{if(!w.phone){u.warning("请输入手机号");return}if(!/^1\d{10}$/.test(w.phone)){u.warning("请输入正确的手机号格式");return}try{await Da(w.phone),u.success("验证码已发送"),D.value=60,x=setInterval(()=>{D.value>0?D.value--:clearInterval(x)},1e3)}catch(a){console.error("Send code error:",a)}},Je=async()=>{if(!w.phone||!w.code){u.warning("请填写完整的手机号和验证码");return}try{await xa({phone:w.phone,code:w.code}),u.success("手机号更换成功"),q.value=!1,await I()}catch(a){console.error("Change phone error:",a)}},be=()=>{q.value=!1},G=c(!1),ne=c(!1),re=c(!1);let L=null;const Ze=()=>{V.value=!1,G.value=!0,we()},we=async()=>{console.log("Refreshing QR code..."),re.value=!0,ne.value=!1;try{Ee(),L&&clearTimeout(L),L=setTimeout(()=>{ne.value=!0},3e5),u.success("二维码已刷新")}catch(a){console.error("Failed to refresh QR code:",a),u.error("二维码刷新失败，请重试")}finally{re.value=!1}},Ee=()=>{const{hostname:a}=window.location;let e="WorkHome";a==="work-uat.gatherbee.cn"?e+="-uat":a==="work.dev.ifeng.com"&&(e+="-sit");const n=`https://www.gatherbee.cn/${e}`,i=document.getElementById("bind_wechat_container");i&&(i.innerHTML="");const v=window.WxLogin;new v({self_redirect:!0,id:"bind_wechat_container",appid:"wx0d30a914d26c73aa",scope:"snsapi_login",redirect_uri:n,state:"from_wxweb",style:"black",href:"data:text/css;base64,LmltcG93ZXJCb3ggLnRpdGxlIHsKCWRpc3BsYXk6IG5vbmU7Cn0KCi5pbXBvd2VyQm94IC5xcmNvZGUgewoJYm9yZGVyOiAxcHggc29saWQgIzk5OTsKCXdpZHRoOiAyMzhweDsKCWhlaWdodDogMjM4cHg7Cglib3JkZXItcmFkaXVzOiA4cHg7CgltYXJnaW46IDA7Cn0KCi5pbXBvd2VyQm94IC5pbmZvIHsKCWRpc3BsYXk6IG5vbmU7Cn0KCi5pbXBvd2VyQm94IC53cnBfY29kZSB7Cgl3aWR0aDogMTAwJTsKfQoKLmltcG93ZXJCb3ggewoJd2lkdGg6IDIzOHB4Owp9CgouaW1wb3dlckJveCAuaWNvbjM4X21zZyB7CglkaXNwbGF5OiBub25lOwoJd2lkdGg6IDQ0cHg7CgloZWlnaHQ6IDQ0cHg7CgliYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwp9CgouaW1wb3dlckJveCAuc3RhdHVzX3R4dCB7Cgl0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLndlYl9xcmNvZGVfdHlwZV9pZnJhbWUgewoJaGVpZ2h0OiAzMDBweDsKfQ=="}),window.addEventListener("message",he,!1)},he=a=>{if(a.origin!=="https://open.work.weixin.qq.com")return;const e=a.data;e.wx_code&&(console.log("微信绑定成功，code:",e.wx_code),He(e.wx_code))},He=async a=>{try{const{data:e,code:n,msg:i}=await Ua(a);e&&n===200?(u.success("微信绑定成功"),G.value=!1,await I()):u.error(i||"微信绑定失败")}catch(e){console.error("微信绑定失败:",e),u.error("微信绑定失败，请重试")}},Xe=async()=>{try{const{data:a,code:e,msg:n}=await Na();a&&e===200?(u.success("解除微信绑定成功"),await I()):u.error(n||"解除绑定失败")}catch(a){console.error("解除微信绑定失败:",a),u.error("解除绑定失败，请重试")}},J=c(!1),N=c(),b=$({oldPassword:"",newPassword:"",confirmPassword:""}),Me=$({oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{validator:(a,e)=>{if(a==="")e(new Error("请输入密码"));else{if(b.confirmPassword!==""){if(!N.value)return;N.value.validateField("confirmPassword",()=>{})}e()}},trigger:"blur"}],confirmPassword:[{validator:(a,e)=>{a===""?e(new Error("请再次输入密码")):a!==b.newPassword?e(new Error("两次输入的密码不一致!")):e()},trigger:"blur"}]}),Qe=()=>{b.oldPassword="",b.newPassword="",b.confirmPassword="",N.value&&N.value.resetFields(),J.value=!0},Te=async()=>{N.value&&await N.value.validate(async a=>{if(a)try{await Ba({originalPassword:b.oldPassword,password:b.newPassword,passwordTwo:b.confirmPassword}),u.success("密码修改成功，请重新登录"),await Fa(),Pe.clearUserInfo(),Ve.push("/login")}catch(e){console.error("Change password error:",e)}})};fa(async()=>{await Ue(),await I(),await Be(),await Fe(),await ve()}),ma(()=>{if(L&&(clearTimeout(L),L=null),x&&(clearInterval(x),x=null),window.removeEventListener("message",he),m.value&&typeof m.value.destroy=="function")try{m.value.destroy()}catch(a){console.warn("组件卸载时销毁裁剪器出错:",a)}m.value=null});const ze=_(()=>y.value?"#000":"#faf9f5"),je=_(()=>y.value?"#EDEDED":"#13343C"),Ke=_(()=>(y.value,"#8E9094")),$e=_(()=>y.value?"rgba(231,231,224,.3)":"#D7D7D7"),Ye=_(()=>(y.value,"#ff9900")),ea=_(()=>y.value?"#FFFFFF":"#000000"),aa=_(()=>y.value?"rgba(231,231,224,.3)":"#D7D7D7"),la=_(()=>y.value?"#2a2a2a":"#faf9f5"),oa=_(()=>y.value?"#4c4d4f":"#dcdfe6"),sa=_(()=>y.value?"#FFFFFF":"#606266"),ta=_(()=>y.value?"#666":"#a8abb2");return(a,e)=>{const n=g("el-avatar"),i=g("el-input"),v=g("el-button"),O=g("el-date-picker"),f=g("el-form-item"),Z=g("el-radio"),E=g("el-radio-group"),H=g("el-option"),X=g("el-select"),K=g("el-form"),_e=g("el-tab-pane"),na=g("el-checkbox"),ra=g("el-tabs"),M=g("el-dialog"),ia=g("el-icon"),da=g("el-upload"),ua=ha("loading");return p(),h("div",Aa,[e[36]||(e[36]=t("h1",{class:"page-title"},"账号管理",-1)),t("div",Ra,[t("div",Sa,[o(n,{size:55,icon:ye(ga),src:ge(d.avatarUrl),onClick:me,style:{cursor:"pointer"}},null,8,["icon","src"]),t("div",qa,[t("div",Ga,[e[23]||(e[23]=t("div",{class:"topname"},"用户名",-1)),t("div",Ja,A(d.userName),1)]),t("div",{class:"edit-links"},[t("a",{href:"javascript:;",class:"edit-link",onClick:me},"更换头像"),t("a",{href:"javascript:;",class:"edit-link",onClick:Le},"编辑资料")])])]),t("div",Za,[(p(!0),h(Q,null,T(De.value,(l,ca)=>(p(),h("div",{key:ca,class:"detail-item"},[t("span",Ea,A(l.label),1),t("div",Ha,[!ae.value||!l.editable?(p(),h("span",Xa,A(l.value),1)):(p(),R(i,{key:1,modelValue:d[l.key],"onUpdate:modelValue":va=>d[l.key]=va,size:"small"},null,8,["modelValue","onUpdate:modelValue"]))])]))),128))]),ae.value?(p(),h("div",Ma,[o(v,{type:"primary",onClick:xe,loading:le.value},{default:s(()=>e[24]||(e[24]=[U("保存")])),_:1,__:[24]},8,["loading"])])):Y("",!0)]),o(M,{modelValue:V.value,"onUpdate:modelValue":e[11]||(e[11]=l=>V.value=l),title:"编辑资料",width:"480px",class:"profile-dialog",left:"","before-close":pe},{footer:s(()=>[t("span",{class:"dialog-footer"},[t("div",{class:"dialog-button cancel",onClick:pe},"取消"),t("div",{class:"dialog-button confirm",onClick:Oe},"确定")])]),default:s(()=>[t("div",Qa,[o(ra,{modelValue:B.value,"onUpdate:modelValue":e[10]||(e[10]=l=>B.value=l),class:"profile-tabs"},{default:s(()=>[o(_e,{label:"个人资料",name:"personal"},{default:s(()=>[o(K,{model:r.value,"label-position":"right","label-width":"80px"},{default:s(()=>[o(f,{label:"注册日期"},{default:s(()=>[o(O,{"model-value":r.value.registedDate,type:"date",placeholder:"注册日期",disabled:"",style:{width:"100%"}},null,8,["model-value"])]),_:1}),o(f,{label:"用户姓名"},{default:s(()=>[o(i,{modelValue:r.value.nickName,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.nickName=l),placeholder:"请输入姓名",class:"custom-input"},null,8,["modelValue"])]),_:1}),o(f,{label:"性别"},{default:s(()=>[o(E,{modelValue:r.value.gender,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.gender=l)},{default:s(()=>[o(Z,{label:1},{default:s(()=>e[25]||(e[25]=[U("男")])),_:1,__:[25]}),o(Z,{label:2},{default:s(()=>e[26]||(e[26]=[U("女")])),_:1,__:[26]})]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"所在地区"},{default:s(()=>[t("div",Ta,[o(X,{modelValue:ce.value,"onUpdate:modelValue":e[2]||(e[2]=l=>ce.value=l),disabled:""},{default:s(()=>[o(H,{label:"中国",value:"中国"})]),_:1},8,["modelValue"]),o(X,{modelValue:C.value,"onUpdate:modelValue":e[3]||(e[3]=l=>C.value=l),placeholder:"选择省份",onChange:We,clearable:""},{default:s(()=>[(p(!0),h(Q,null,T(S.value,l=>(p(),R(H,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(X,{modelValue:k.value,"onUpdate:modelValue":e[4]||(e[4]=l=>k.value=l),placeholder:"选择城市",disabled:!C.value,clearable:""},{default:s(()=>[(p(!0),h(Q,null,T(P.value,l=>(p(),R(H,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])])]),_:1}),o(f,{label:"专业身份"},{default:s(()=>[o(X,{modelValue:r.value.profession,"onUpdate:modelValue":e[5]||(e[5]=l=>r.value.profession=l),placeholder:"请选择",class:"custom-input"},{default:s(()=>[(p(!0),h(Q,null,T(de.value,l=>(p(),R(H,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(f,{label:"职业资格"},{default:s(()=>[o(X,{modelValue:r.value.qualifications,"onUpdate:modelValue":e[6]||(e[6]=l=>r.value.qualifications=l),placeholder:"请选择职业资格",clearable:"",class:"custom-input"},{default:s(()=>[(p(!0),h(Q,null,T(ue.value,l=>(p(),R(H,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),o(_e,{label:"账号安全",name:"security"},{default:s(()=>[o(K,{"label-position":"right","label-width":"80px",style:{"padding-top":"5px","padding-right":"2px"}},{default:s(()=>[o(f,{label:"用户名"},{default:s(()=>[o(i,{modelValue:r.value.userName,"onUpdate:modelValue":e[7]||(e[7]=l=>r.value.userName=l),placeholder:"请输入用户名",class:"custom-input"},null,8,["modelValue"])]),_:1}),o(f,{label:"手机号"},{default:s(()=>[t("div",za,[o(i,{"model-value":Ne.value,disabled:"",style:{width:"200px","margin-right":"16px"},class:"custom-input"},{suffix:s(()=>[t("div",{class:"change-phone-btn",onClick:qe},"更改")]),_:1},8,["model-value"]),o(na,{modelValue:r.value.phoneInvisible,"onUpdate:modelValue":e[8]||(e[8]=l=>r.value.phoneInvisible=l),style:{color:"#ff9900 !important"}},{default:s(()=>e[27]||(e[27]=[U("不公开我的手机号")])),_:1,__:[27]},8,["modelValue"])])]),_:1}),o(f,{label:"登录密码"},{default:s(()=>[t("div",ja,[e[29]||(e[29]=t("span",null,"******",-1)),o(v,{type:"text",class:"action-link",onClick:Qe},{default:s(()=>e[28]||(e[28]=[U("修改")])),_:1,__:[28]})])]),_:1}),o(f,{label:"绑定微信"},{default:s(()=>[t("div",Ka,[t("span",null,A(d.wechat_nickname||"未关联"),1),o(v,{type:"text",class:"action-link",onClick:e[9]||(e[9]=l=>d.wechat_nickname?Xe():Ze())},{default:s(()=>[U(A(d.wechat_nickname?"解除绑定":"绑定"),1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"]),o(M,{modelValue:F.value,"onUpdate:modelValue":e[13]||(e[13]=l=>F.value=l),title:"设置头像",width:"400px",class:"avatar-dialog",left:"","before-close":()=>F.value=!1},{footer:s(()=>[t("span",ol,[t("div",{class:"dialog-button cancel",onClick:e[12]||(e[12]=()=>F.value=!1)}," 取消 "),t("div",{class:"dialog-button confirm",onClick:Se}," 保存 ")])]),default:s(()=>[t("div",$a,[j.value?Y("",!0):(p(),R(da,{key:0,class:"avatar-uploader","auto-upload":!1,"show-file-list":!1,"on-change":Ae,"before-upload":Re},{default:s(()=>[W.value?(p(),h("img",{key:0,src:ge(W.value),class:"avatar"},null,8,Ya)):(p(),h("div",el,[o(ia,{class:"avatar-uploader-icon"},{default:s(()=>[o(ye(ba))]),_:1}),e[30]||(e[30]=t("span",null,"重新上传",-1)),e[31]||(e[31]=t("span",{class:"upload-tip"},"不超过 5 MB (JPG/PNG)",-1))]))]),_:1})),j.value?(p(),h("div",al,[t("img",{ref_key:"imageRef",ref:te,src:W.value,alt:"选择的头像",style:{"max-width":"100%"}},null,8,ll)])):Y("",!0)])]),_:1},8,["modelValue","before-close"]),o(M,{modelValue:q.value,"onUpdate:modelValue":e[16]||(e[16]=l=>q.value=l),title:"更换手机号",width:"480px",class:"profile-dialog",center:"","before-close":be},{footer:s(()=>[t("span",{class:"dialog-footer"},[t("div",{class:"dialog-button cancel",onClick:be},"取消"),t("div",{class:"dialog-button confirm",onClick:Je},"确定")])]),default:s(()=>[t("div",sl,[o(K,{model:w,"label-position":"top",class:"phone-form"},{default:s(()=>[o(f,{label:"新手机号",prop:"phone"},{default:s(()=>[o(i,{modelValue:w.phone,"onUpdate:modelValue":e[14]||(e[14]=l=>w.phone=l),placeholder:"请输入新手机号"},null,8,["modelValue"])]),_:1}),o(f,{label:"验证码",prop:"code",class:"verify-code-item"},{default:s(()=>[o(i,{modelValue:w.code,"onUpdate:modelValue":e[15]||(e[15]=l=>w.code=l),placeholder:"请输入验证码"},null,8,["modelValue"]),o(v,{type:"text",class:"get-code-btn",onClick:Ge,disabled:D.value>0},{default:s(()=>[U(A(D.value>0?`${D.value}s后重发`:"获取验证码"),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"]),o(M,{modelValue:G.value,"onUpdate:modelValue":e[17]||(e[17]=l=>G.value=l),title:"绑定微信",width:"320px",class:"bind-wechat-dialog",center:"","before-close":()=>G.value=!1},{default:s(()=>[t("div",tl,[wa((p(),h("div",nl,[ne.value?(p(),h("div",rl,[e[33]||(e[33]=t("span",null,"二维码已过期",-1)),o(v,{type:"primary",size:"small",onClick:we},{default:s(()=>e[32]||(e[32]=[U("点击刷新")])),_:1,__:[32]})])):Y("",!0),e[34]||(e[34]=t("div",{id:"bind_wechat_container",class:"wechat-login-container"},null,-1))])),[[ua,re.value]]),e[35]||(e[35]=t("p",{class:"scan-tip"},"扫码绑定微信",-1))])]),_:1},8,["modelValue","before-close"]),o(M,{modelValue:J.value,"onUpdate:modelValue":e[22]||(e[22]=l=>J.value=l),title:"修改密码",width:"480px",class:"profile-dialog",center:"","before-close":()=>J.value=!1},{footer:s(()=>[t("span",dl,[t("div",{class:"dialog-button cancel",onClick:e[21]||(e[21]=()=>J.value=!1)},"取消"),t("div",{class:"dialog-button confirm",onClick:Te},"确定")])]),default:s(()=>[t("div",il,[o(K,{model:b,ref_key:"passwordFormRef",ref:N,rules:Me,"label-position":"top",class:"phone-form"},{default:s(()=>[o(f,{label:"旧密码",prop:"oldPassword"},{default:s(()=>[o(i,{modelValue:b.oldPassword,"onUpdate:modelValue":e[18]||(e[18]=l=>b.oldPassword=l),type:"password",placeholder:"请输入旧密码","show-password":""},null,8,["modelValue"])]),_:1}),o(f,{label:"新密码",prop:"newPassword"},{default:s(()=>[o(i,{modelValue:b.newPassword,"onUpdate:modelValue":e[19]||(e[19]=l=>b.newPassword=l),type:"password",placeholder:"请输入新密码","show-password":""},null,8,["modelValue"])]),_:1}),o(f,{label:"确认新密码",prop:"confirmPassword"},{default:s(()=>[o(i,{modelValue:b.confirmPassword,"onUpdate:modelValue":e[20]||(e[20]=l=>b.confirmPassword=l),type:"password",placeholder:"请再次输入新密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","before-close"])])}}}),hl=Oa(ul,[["__scopeId","data-v-0bea947d"]]);export{hl as default};
